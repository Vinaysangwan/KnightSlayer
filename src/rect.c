#include "rect.h"

static SDL_FRect rect;

typedef struct {
    int x;
    int y;
}Position;

Position position = {0,0};

//********************************************************************************************************************
//**************************************************** Cleanup  ******************************************************
//********************************************************************************************************************
static void cleanup_Rect()
{
    
}

//********************************************************************************************************************
//**************************************************** Handle Event **************************************************
//********************************************************************************************************************
static void handle_Event_Rect(SDL_Event *event)
{

}

//********************************************************************************************************************
//**************************************************** Update ********************************************************
//********************************************************************************************************************
static void update_Rect(float delta_time)
{
    const _Bool* keyboard_state = SDL_GetKeyboardState(NULL);
    const int speed = 100;

    if(keyboard_state[SDL_SCANCODE_W])
    {
        position.y -= speed * delta_time;
    }
    if(keyboard_state[SDL_SCANCODE_S])
    {
        position.y += speed * delta_time;
    }
    if(keyboard_state[SDL_SCANCODE_A])
    {
        position.x -= speed * delta_time;
    }
    if(keyboard_state[SDL_SCANCODE_D])
    {
        position.x += speed * delta_time;
    }
}

//********************************************************************************************************************
//**************************************************** Render ********************************************************
//********************************************************************************************************************
static void render_Rect(SDL_Renderer *renderer)
{
    rect.w = 100;
    rect.h = 100;
    rect.x = position.x;
    rect.y = position.y;

    SDL_SetRenderDrawColor(renderer,255,0,0,255);
    SDL_RenderRect(renderer, &rect);
}

//********************************************************************************************************************
//**************************************************** Init **********************************************************
//********************************************************************************************************************
void init_Rect(void *appstate)
{

    Entity rect = {
        .render = render_Rect,
        .update = update_Rect,
        .handle_Event = handle_Event_Rect,
        .cleanup = cleanup_Rect,
    };

    create_Entity(rect);
}